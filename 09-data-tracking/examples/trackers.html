<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Tracking the Trackers</title>

    <!-- 
    Title: Tracking the Trackers
    Author: Owen Mundy
    Date: 2024
    License: MIT
    -->

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">


    <!-- Open Graph tags for FB link previews
    https://developers.facebook.com/docs/sharing/webmasters -->
    <meta property="og:url" content="https://omundy.github.io/critical-web-design-book/09-data-tracking/examples/trackers.html" />
    <meta property="og:type" content="website" />
    <meta property="og:title" content="Critical Web Design - Tracking the Trackers" />
    <meta property="og:description" content="Explore how others store and access your data to track and manipulate you across different websites, browsers, and devices." />
    <meta property="og:image" content="https://omundy.github.io/critical-web-design-book/assets/img/previews/09/rick-roll.png" />


    <style>
        :root {
            --code-bg: #282C34;
        }

        /* h4 .num {
            --size: 1.8rem;
            display: inline-block;
            text-align: center;
            vertical-align: middle;
            line-height: var(--size);
            height: var(--size);
            width: var(--size);
            border-radius: 50%;
            color: white;
            background-color: var(--code-bg);
            font-size: 1rem;
        } */

        .card.dark {
            background-color: #282C34;
            color: var(--bs-gray-500);
        }

        .card-body code {
            display: block;
            white-space: pre-wrap;
            line-height: 1.3rem;
            color: #A249BC;
        }

        .card-body code.comment {
            color: #777;
        }


        .card-header {
            font-size: .9rem;
        }

        .card-body.empty {
            min-height: 50px;
        }

        .card-body.h100 {
            height: 100px;
        }

        .card-body.h200 {
            height: 200px;
        }

        .card-footer {
            text-align: right;
            font-size: .9rem;
        }

        /* dark */

        .dark .card-body code {
            color: #38B3C2;
        }

        .dark .card-header {
            color: var(--bs-gray-300);
            border-bottom-color: var(--bs-gray-600);
        }

        .dark .card-body {
            background-color: var(--code-bg);
        }

        .dark .card-footer {
            color: var(--bs-gray-500);
            border-top-color: var(--bs-gray-600);
        }

        /* https://christianoliff.com/blog/styling-external-links-with-an-icon-in-css/ */
        /* a[href^="http"]::after,
        a[href^="https://"]::after, */
        a[target="_blank"]::after {
            content: "";
            width: 11px;
            height: 11px;
            margin-left: 4px;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' fill='currentColor' viewBox='0 0 16 16'%3E%3Cpath fill-rule='evenodd' d='M8.636 3.5a.5.5 0 0 0-.5-.5H1.5A1.5 1.5 0 0 0 0 4.5v10A1.5 1.5 0 0 0 1.5 16h10a1.5 1.5 0 0 0 1.5-1.5V7.864a.5.5 0 0 0-1 0V14.5a.5.5 0 0 1-.5.5h-10a.5.5 0 0 1-.5-.5v-10a.5.5 0 0 1 .5-.5h6.636a.5.5 0 0 0 .5-.5z'/%3E%3Cpath fill-rule='evenodd' d='M16 .5a.5.5 0 0 0-.5-.5h-5a.5.5 0 0 0 0 1h3.793L6.146 9.146a.5.5 0 1 0 .708.708L15 1.707V5.5a.5.5 0 0 0 1 0v-5z'/%3E%3C/svg%3E");
            background-position: center;
            background-repeat: no-repeat;
            background-size: contain;
            display: inline-block;
        }
    </style>
</head>
<body>



    <div class="container my-3">

        <div class="row">
            <div class="col">
                <h2 class="mt-3 text-center">Have You Been Identified?</h2>
                <hr>

                <p>Use DevTools to explore how trackers and other embedded scripts collect, store, and identify your data in the browser. </p>

                <small class="d-block mt-2">‚ö†Ô∏è This page contains several web tracking methods and is for testing only. We don't save any information, but the trackers on the page probably will. Opening it in an incognito window with ad and / or tracker blockers disabled will allow you to see most results.</small>
            </div>
        </div>
















        <div class="row mt-5">
            <div class="col-12 col-md-7">
                <div class="row">
                    <div class="col-12 col-xl-3">
                        <h4><span class="num">1</span> Your Data</h4>
                    </div>
                    <div class="col-12 col-xl-9 mb-3">

                        <p>Websites can access a lot of information about visitors thanks to basic browser functionality and data sent via request headers. </p>

                        <ol>
                            <li>Example 1-1 shows data from the <code>window.navigator</code> Javascript object. Run it in the console to see more.</li>
                            <li>Explore the quiz at <a href="https://geokitten.com" target="_blank">geokitten.com</a> and then examine example 1-2 showing data returned from a geolocation API using only your IP address. </li>
                        </ol>

                    </div>
                </div>
            </div>
            <div class="col-12 col-md-5">

                <div class="card dark">
                    <div class="card-header">
                        1-1 Data available in every browser
                    </div>
                    <div class="card-body overflow-y-scroll h100">
                        <code class="eledata"></code>
                    </div>
                </div>

                <div class="card dark mt-3">
                    <div class="card-header">
                        1-2 Data discovered from your IP address
                    </div>
                    <div class="card-body overflow-y-scroll h100">
                        <code class="elegeo"></code>
                    </div>
                </div>

            </div>
        </div>



        <div class="row mt-5">
            <div class="col-12 col-md-7">
                <div class="row">
                    <div class="col-12 col-xl-3">
                        <h4><span class="num">2</span> Link Tracking</h4>
                    </div>
                    <div class="col-12 col-xl-9 mb-3">

                        <p>Link tracking is easy to spot and avoid. When you click an ad or share a website extra URL parameters (see Module 5.3), like <code>utm_source</code>, <code>utm_campaign</code>, are added to the end of the link. These parameters can pass data about your activity to analytics and advertising tools to track the effectiveness of marketing campaigns.</p>

                        <ol>
                            <li>Examine the two example URLs containing link tracking parameters. Example 2-1 is a common use. Example 2-2 shows how these could share data about you.</li>
                            <li>Find and click on an online ad to see a real one in action.</li>
                        </ol>

                        <details>
                            <summary>More Details</summary>
                            <small class="d-block mt-2">‚ö†Ô∏è You can usually delete everything after the "?" whenever you use a <b>utm_*</b> link.</small>
                            <small class="d-block mt-2">‚ö†Ô∏è Link tracking <a href="https://blog.hootsuite.com/how-to-use-utm-parameters/" target="_blank">does not require consent</a> under the GDPR like cookies and third party tracking pixels.</small>
                        </details>

                    </div>
                </div>
            </div>
            <div class="col-12 col-md-5">

                <!-- 
                Resources
                https://en.wikipedia.org/wiki/UTM_parameters
                https://blog.hootsuite.com/how-to-use-utm-parameters/
                https://developers.facebook.com/docs/instagram/ads-api/guides/url-tags-for-tracking/
                -->
                <div class="card dark">
                    <div class="card-header">
                        2-1 Link tracking example
                    </div>
                    <div class="card-body">
                        <code><a href="https://www.example.com/page?utm_content=buffercf3b2&utm_medium=social&utm_source=snapchat.com&utm_campaign=buffer" target="_blank">https://www.example.com/page?utm_content=buffercf3b2&utm_medium=social&utm_source=snapchat.com&utm_campaign=buffer</a></code>
                    </div>
                </div>

                <div class="card dark mt-3">
                    <div class="card-header">
                        2-2 Link tracking example (using your data)
                    </div>
                    <div class="card-body">
                        <code class="elelink"></code>
                    </div>
                </div>


            </div>
        </div>






        <div class="row mt-5">
            <div class="col-12 col-md-7">
                <div class="row">
                    <div class="col-12 col-xl-3">
                        <h4><span class="num">3</span> Common Trackers</h4>
                    </div>
                    <div class="col-12 col-xl-9 mb-3">

                        <p>A <b>tracker</b> is any code that collects data on users. The Ghostery tracker blocker describes 16 categories of trackers, including advertising, analytics, widgets, and telemetry. As you might guess, the most common trackers are run by the most profitable companies like Google, Facebook, Amazon, and Microsoft. While some trackers are necessary to remember your login status, those that manipulate or sell your data are most certainly not. Some trackers are obvious from their visual components, such as the embedded widgets and media on this page (Facebook and Twitter buttons, Youtube video). However, most tracker code is hidden unless you examine the source code or use DevTools to see how they are storing information about you.</p>

                    </div>
                </div>
            </div>
            <div class="col-12 col-md-5">



                <div class="card dark">
                    <div class="card-header">3-1 Share buttons</div>
                    <div class="card-body">

                        <!-- Resources:
                        https://developers.facebook.com/docs/plugins/share-button/
                        -->
                        <div id="fb-root"></div>
                        <script async defer crossorigin="anonymous" src="https://connect.facebook.net/en_US/sdk.js#xfbml=1&version=v19.0&appId=189746494413987" nonce="Q1uUfeVv"></script>

                        <!-- Your share button code -->
                        <div class="fb-share-button" data-href="https://omundy.github.io/critical-web-design-book/09-data-tracking/examples/trackers.html" data-layout="button_count" data-size="large">
                            <a target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Fomundy.github.io%2Fcritical-web-design-book%2F09-data-tracking%2Fexamples%2Ftrackers.html&amp;src=sdkpreparse" class="fb-xfbml-parse-ignore">Share</a>
                        </div>


                        <span style="vertical-align: -6px; margin-left: 10px;">
                            <!-- Resources:
                        https://developer.twitter.com/en/docs/twitter-for-websites/web-intents/overview
                        https://developer.twitter.com/en/docs/twitter-for-websites/tweet-button/overview
                        -->
                            <script type="text/javascript" async src="https://platform.twitter.com/widgets.js"></script>
                            <a class="twitter-share-button" target="_blank" href="https://twitter.com/intent/tweet?text=Critical%20Web%20Design%20-%20Tracking%20the%20Trackers&url=https://omundy.github.io/critical-web-design-book/09-data-tracking/examples/trackers.html" data-size="large">Tweet</a>

                        </span>

                    </div>
                </div>


                <div class="card dark mt-3">
                    <div class="card-header">3-2 Embedded media</div>
                    <div class="card-body">

                        <div class="ratio ratio-4x3">
                            <iframe width="560" height="315" src="https://www.youtube.com/embed/dQw4w9WgXcQ?si=_U5wln0rCHoUl1Jh" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>
                        </div>

                    </div>
                </div>


                <div class="card dark mt-3">
                    <div class="card-header">3-3 Google Analytics</div>
                    <div class="card-body empty">

                        <!-- Google tag (gtag.js) -->
                        <script async src="https://www.googletagmanager.com/gtag/js?id=G-DFYTWR6TXG"></script>
                        <script>
                            window.dataLayer = window.dataLayer || [];
                            function gtag() { dataLayer.push(arguments); }
                            gtag('js', new Date());

                            gtag('config', 'G-DFYTWR6TXG');
                        </script>
                        <code>Nothing to see here. üòé This method is invisible.</code>

                    </div>
                </div>


            </div>
        </div>










        <div class="row mt-5">
            <div class="col-12 col-md-7">
                <div class="row">
                    <div class="col-12 col-xl-3">
                        <h4><span class="num">4</span> Cookies</h4>
                    </div>
                    <div class="col-12 col-xl-9 mb-3">

                        <p>
                            <b>Cookies</b> are used by websites to store information in your browser. Cookies can be created using Javascript or a web server, store any text up to 4 kilobytes (about 2000 words), and are only accessible by the website that created the cookie. Without cookies enabled websites won't know you are logged in or store your preferences. However, cookies also let sites track you, even if they only know you by this identifier.
                        </p>

                        <ol>
                            <li>Open DevTools > Applications and then expand Cookies (under Storage on the left) to see the domains that have set cookies on this page. </li>
                            <li>Select the domain: omundy.github.com and look for cookies prefixed with <code>cwd</code> Example 4-1 shows the same data (when you visited this page). Refresh the page to update the date in both locations. </li>
                            <li>All other cookies are set by the resources and embedded scripts on this page. For example, <code>_ga</code> is the identifier for Google Analytics. Try deleting them and reloading the page to see what happens.</li>
                            <li>Set your own cookie by running the code in Example 4-2 in the DevTools console.</li>
                        </ol>

                        <details>
                            <summary>More Details</summary>
                            <small class="d-block mt-2">‚ö†Ô∏è If you click on the other domains in DevTools > Cookies you will see others set by all the embedded examples.</small>
                            <small class="d-block mt-2">‚ö†Ô∏è Any cookie can be edited or deleted. Delete a cookie set by this page and refresh to see them again. If you delete a cookie used for authentication you may need to login again.</small>
                            <small class="d-block mt-2">‚ö†Ô∏è Cookies containing unique IDs are sent with internet requests. To see the requests, in DevTools > Network > Select a resource and click on the Headers tab and scroll to the Request Headers. If cookies are sent a Cookies tab will show the total list of cookies. Select different requests on the left and you will notice even requests for image files will include cookies.</small>
                        </details>

                    </div>
                </div>
            </div>
            <div class="col-12 col-md-5">

                <div class="card dark">
                    <div class="card-header">
                        4-1 Cookies set by this page
                    </div>
                    <div class="card-body">
                        <code class="elecookie"></code>
                    </div>
                    <div class="card-footer">Refresh page to update</div>
                </div>

                <div class="card mt-3">
                    <div class="card-header">
                        4-2 Add a cookie using the console and <a href="https://developer.mozilla.org/en-US/docs/Web/API/Document/cookie" target="_blank">document.cookie</a>
                    </div>
                    <div class="card-body">
                        <code>document.cookie = "msg=hello, world!;"</code>
                        <code>console.log(document.cookie)</code>
                        <code class="comment">//-> "msg=hello, world!; ..."</code>
                    </div>
                </div>

            </div>
        </div>




        <div class="row mt-5">
            <div class="col-12 col-md-7">
                <div class="row">
                    <div class="col-12 col-xl-3">
                        <h4><span class="num">5</span> Local Storage</h4>
                    </div>
                    <div class="col-12 col-xl-9 mb-3">

                        <p>
                            The Web Storage API is a better method for storing information in the browser, using a key to make it easy to retrieve or update.
                        </p>

                        <ol>
                            <li>In DevTools > Applications, expand Local Storage.</li>
                            <li>Select the domain: omundy.github.com and look for records prefixed with <code>cwd</code> Example 5-1 shows the same data (when you visited this page). Refresh the page to update the date in both locations. </li>
                            <li>All other items in Local Storage are set by the resources and embedded scripts on this page. As with cookies, you can edit or delete the data stored in Local Storage.</li>
                            <li>Check out <a href="https://www.nytimes.com/games/wordle" target="_blank">Wordle</a> to see if you can figure out how it stores your game progress using Local Storage (hint: look for a key named <code>nyt-wordle-moogle</code>).</li>

                        </ol>

                        <details>
                            <summary>More Details</summary>
                            <small class="d-block mt-2">‚ö†Ô∏è Click on other domains in DevTools > Local Storage to see the data set by the embedded examples.</small>
                            <small class="d-block mt-2">‚ö†Ô∏è Any row can be edited or deleted. If you delete a row used for authentication you may need to login again.</small>
                        </details>

                    </div>
                </div>
            </div>
            <div class="col-12 col-md-5">

                <div class="card dark">
                    <div class="card-header">
                        5-1 Local Storage items set by this page
                    </div>
                    <div class="card-body">
                        <code class="elestorage"></code>
                    </div>
                    <div class="card-footer">Refresh page to update</div>
                </div>

                <div class="card mt-3">
                    <div class="card-header">
                        5-2 Set your own values using the console and <a href="https://developer.mozilla.org/en-US/docs/Web/API/Window/localStorage" target="_blank">localStorage</a>
                    </div>
                    <div class="card-body">
                        <code>localStorage.setItem("hello", "world!")</code>
                        <code>localStorage.getItem("hello")</code>
                        <code class="comment">//-> "world!"</code>
                    </div>
                </div>

            </div>
        </div>







        <div class="row mt-5">
            <div class="col-12 col-md-7">
                <div class="row">
                    <div class="col-12 col-xl-3">
                        <h4><span class="num">6</span> Your Identity</h4>
                    </div>
                    <div class="col-12 col-xl-9 mb-3">

                        <p>
                            The one data point that can't be directly accessed from your online activity is your identity. This doesn't stop trackers from trying to find it, or creating one for you even if they don't know your real name. Whether you are logged in or not, websites create various tokens and GUIDs (generic user ids) to identify and allow you access to specific pages, or collect your data to manipulate your behavior.
                        </p>

                        <!-- 
                        <ol>
                            <li>Open DevTools > Applications > Storage</li>
                            <li>Expand Cookies and select <code>.facebook.com</code> or <code>.twitter.com</code> to see stored data.</li>
                            <li>Expand Local storage and select <code>.facebook.com</code> or <code>.twitter.com</code> to see stored data.</li>
                        </ol>



                        <p>YouTube and other embedded media can also access your data.</p>

                        <ol>
                            <li>Open DevTools > Applications</li>
                            <li>Expand Storage > Cookies</li>
                            <li>Select the cookie with the name _ga (Google Analytics)</li>
                        </ol> -->



                    </div>
                </div>
            </div>
            <div class="col-12 col-md-5">

                <div class="card dark">
                    <div class="card-header">
                        4-1 Meta Tracking Pixel Cookie Identifier
                    </div>
                    <div class="card-body">
                        <code class="elefb"></code>
                    </div>
                </div>

                <div class="card dark mt-3">
                    <div class="card-header">
                        4-2 Google Analytics Cookie Identifier
                    </div>
                    <div class="card-body">
                        <code class="elega"></code>
                    </div>
                </div>

            </div>
        </div>









        <div class="row mt-5">
            <div class="col-12 col-md-7">
                <div class="row">
                    <div class="col-12 col-xl-3">
                        <h4><span class="num">7</span> Meta Tracking Pixel</h4>
                    </div>
                    <div class="col-12 col-xl-9 mb-3">

                        <p>
                            You can't see it because it's invisible, but this 1x1 pixel image, a.k.a. the Meta Tracking Pixel is one of the sneakiest forms of tracking out there. It works on emails
                        </p>

                    </div>
                </div>
            </div>
            <div class="col-12 col-md-5">

                <!-- 
                Resources:
                https://blog.hootsuite.com/facebook-pixel/
                https://www.facebook.com/business/help/964258670337005?id=1205376682832142
                -->



                <div class="card dark mt-3">
                    <div class="card-header">Owen's Tracking Pixel</div>
                    <div class="card-body empty">

                        <!-- Owen's Tracking Pixel -->
                        <!-- Meta Pixel Code -->
                        <script>
                            !function (f, b, e, v, n, t, s) {
                                if (f.fbq) return; n = f.fbq = function () {
                                    n.callMethod ?
                                        n.callMethod.apply(n, arguments) : n.queue.push(arguments)
                                };
                                if (!f._fbq) f._fbq = n; n.push = n; n.loaded = !0; n.version = '2.0';
                                n.queue = []; t = b.createElement(e); t.async = !0;
                                t.src = v; s = b.getElementsByTagName(e)[0];
                                s.parentNode.insertBefore(t, s)
                            }(window, document, 'script',
                                'https://connect.facebook.net/en_US/fbevents.js');
                            fbq('init', '893511094044886');
                            fbq('track', 'PageView');
                        </script>
                        <noscript><img height="1" width="1" style="display:none" src="https://www.facebook.com/tr?id=893511094044886&ev=PageView&noscript=1" /></noscript>
                        <!-- End Meta Pixel Code -->

                        <code>Nothing to see here. üòé This method is invisible.</code>

                    </div>
                </div>

            </div>
        </div>


        <div class="row mt-5">
            <div class="col-12 col-md-7">
                <div class="row">
                    <div class="col-12 col-xl-3">
                        <h4><span class="num">8</span> Browser Fingerprinting</h4>
                    </div>
                    <div class="col-12 col-xl-9 mb-3">

                        <p>Browser fingerprinting (a.k.a. "Device Fingerprinting") is a way to track your activity by storing a list of all the attributes of your browser and device that, when considered together, are specific enough that you can be reliably identified out of a crowd of other users. Much like many other methods listed above, this tactic is invisible, yet requires no cookies or embedded code to identify your activity across the web.</p>

                        <ol>
                            <li>To see your "fingerprint" visit: <a href="https://amiunique.org" target="_blank">amiunique.org</a></li>
                            <li>Learn how to cover your tracks: <a href="https://coveryourtracks.eff.org/" target="_blank">coveryourtracks.eff.org</a>  </li>
                        </ol>

                    </div>
                </div>
            </div>
            <div class="col-12 col-md-5">

                <!-- Resources:
                https://www.avast.com/c-what-is-browser-fingerprinting
                -->
                <div class="card dark mt-3">
                    <div class="card-header">Browser fingerprinting</div>
                    <div class="card-body empty">

                        <code>Nothing to see here. üòé This method is invisible.</code>

                    </div>
                </div>

            </div>
        </div>




        <div class="row mt-5">
            <div class="col-12">
                <h2 class="mt-3 text-center">Other Examples</h2>
                <hr>
            </div>
        </div>



        <div class="row mt-3">
            <div class="col-12 col-md-7">
                <div class="row">
                    <div class="col-12 col-xl-3">
                        <h4><span class="num">9</span> Other ways to see your data</h4>
                    </div>
                    <div class="col-12 col-xl-9 mb-3">

                        <p></p>

                        <ol>
                            <li>Use <a href="https://themarkup.org/series/blacklight" target="_blank">Blacklight</a>, a Real-Time Website Privacy Inspector. Enter the address of any website, and Blacklight will scan it and reveal the specific user-tracking technologies on the site.</li>
                        </ol>

                    </div>
                </div>
            </div>
            <div class="col-12 col-md-5">

                <!-- 
                Resources:
                -->

                <div class="card dark mt-3">
                    <div class="card-header">More Resources</div>
                    <div class="card-body empty">


                    </div>
                </div>

            </div>
        </div>







        <div class="row mt-5">
            <div class="col-12 col-md-7">
                <div class="row">
                    <div class="col-12 col-xl-3">
                        <h4><span class="num">10</span> Ad & Tracker Blockers</h4>
                    </div>
                    <div class="col-12 col-xl-9 mb-3">

                        <p>It's worth noting here an interesting detail about ad blockers, which usually function by intercepting and preventing requests for ad networks from embedded scripts and resources. To do this they must maintain lists (known as blocklists) in order to know which domains are tracking and trying to manipulate users.
                        </p>

                        <ol>
                            <li>The <a href="https://disconnect.me/" target="_blank">Disconnect browser extension</a> conveniently makes their lists open source. Check out their <a href="https://github.com/disconnectme/disconnect-tracking-protection/blob/master/services.json" target="_blank">services</a> and <a href="https://github.com/disconnectme/disconnect-tracking-protection/blob/master/entities.json" target="_blank">entities</a> files to see if you recognize any of these domains.</li>
                        </ol>

                    </div>
                </div>
            </div>
            <div class="col-12 col-md-5">

                <!-- 
                Resources:
                https://github.com/disconnectme/disconnect-tracking-protection
                -->

                <div class="card dark">
                    <div class="card-header">Tracker domains from Disconnect's entities.json</div>
                    <div class="card-body overflow-y-scroll h200">
                        <code class="eleentities">...<br>adnologies":{<br>&nbsp;&nbsp;"properties":["adnologies.com","heias.com"],<br>&nbsp;&nbsp;"resources":["adnologies.com","heias.com"]},<br>"Adobe":{<br>&nbsp;&nbsp;"properties":["adobe.com","livefyre.com","marketo.com","tmogul.com","tubemogul.com","typekit.com"],<br>&nbsp;&nbsp;"resources":["2o7.net","adobe.com","adobedc.net","adsymptotic.com","auditude.com","demdex.com","demdex.net","dmtracker.com","efrontier.com","everestads.net","everestjs.net","everesttech.net","fyre.co","hitbox.com","livefyre.com","marketo.com","marketo.net","mktoresp.com","omniture.com","omtrdc.net","scene7.com","sitestat.com","tmogul.com","touchclarity.com","tubemogul.com","typekit.com"]},<br>"Adomik":{<br>&nbsp;&nbsp;"properties":["adomik.com"],<br>&nbsp;&nbsp;"resources":["adomik.com"]},<br>"AdOnion":{<br>&nbsp;&nbsp;"properties":["adonion.com"],<br>&nbsp;&nbsp;"resources":["adonion.com"]}, <br>...</code>
                    </div>
                    <div class="card-footer"><a href="https://github.com/disconnectme/disconnect-tracking-protection/blob/master/entities.json" target="_blank">entities.json</a></div>
                </div>



            </div>
        </div>





    </div>


    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>

    <script src="../../assets/js/fs-environment.js"></script>
    <script>

        (async () => {

            let data = await Environment.getNavigatorFormatted(),
                geo = await Environment.getGeoLocation_ipdata();

            async function showData() {
                try {
                    const eledata = document.querySelector('.eledata');
                    eledata.innerHTML = JSON.stringify(data, null, '&nbsp;');
                    const elegeo = document.querySelector('.elegeo');
                    elegeo.innerHTML = JSON.stringify(geo, null, '&nbsp;');
                }
                catch (err) {
                    console.error(err);
                }
            }

            async function showLink() {
                const elelink = document.querySelector('.elelink');
                let url = "https://www.example.com/page?"
                try {
                    url += `browser=${data.browser}`
                    url += `&platform=${data.platform}`
                    url += `&language=${data.language}`

                    url += `&battery=${data.battery.level}%`
                    url += `&charging=${data.battery.charging}`

                    url += `&ip=${geo.ip}`
                    url += `&isp=${geo.asn.name}`
                    url += `&city=${geo.city}`
                    url += `&amp;region=${geo.region}`
                    url += `&country=${geo.country_name}`
                    url += `&flag=${geo.emoji_flag}`
                    url += `&continent=${geo.continent_name}`
                    url += `&lat=${geo.latitude}`
                    url += `&lng=${geo.longitude}`
                    url += `&timezone=${geo.time_zone.name}`
                    url += `&amp;currency=${geo.currency.code}`
                } catch (err) {
                    console.log("err", err)
                } finally {
                    // console.log("url", url)
                    elelink.innerHTML = `<a target="_blank" href="https://www.example.com/page?browser=${url}">${url}</a>`;
                }
            }


            async function showEntities() {
                fetch('https://raw.githubusercontent.com/disconnectme/disconnect-tracking-protection/master/entities.json')
                    .then(resp => resp.json())
                    .then(data => {
                        if (!data) return;
                        const eleentities = document.querySelector('.eleentities');
                        eleentities.innerHTML = JSON.stringify(data, null, '&nbsp;');
                    })
            }

            function getDate() {
                let d = new Date();
                d.setTime(d.getTime() + (365 * 24 * 60 * 60 * 1000));
                return d;
            }


            function getCookie(key) {
                // split cookie
                let cookieArr = document.cookie.split("; ")
                // console.log("cookieArr", cookieArr)
                return cookieArr
                    .find((row) => row.startsWith(key + "="))
                    ?.split("=")[1];
            }

            let message = "cwd-msg",
                previous = "cwd-prev",
                visited = "cwd-visit"

            async function showCookie() {
                // references
                const ele = document.querySelector('.elecookie');
                let today = getDate();

                // update previous
                let previousVisit = getCookie(visited);
                if (previousVisit) {
                    document.cookie = `${previous}=${previousVisit}; expires=${today.toUTCString()}; path=/`;
                }
                // update others
                document.cookie = `${message}=Hello!üëã; expires=${today.toUTCString()}; path=/`;
                document.cookie = `${visited}=${today.toUTCString()}; expires=${today.toUTCString()}; path=/`;

                // get data for display in page
                ele.textContent = `${message}   = ${getCookie(message)} \n${previous}  = ${getCookie(previous)} \n${visited} = ${getCookie(visited)}`

            }


            async function showStorage() {

                // references
                const ele = document.querySelector('.elestorage');
                let today = getDate();

                // look for previous
                let previousVisit = localStorage.getItem(visited);
                // console.log("previousVisit", previousVisit);

                // update previous
                if (previousVisit) {
                    localStorage.setItem(previous, previousVisit);
                }
                // update others
                localStorage.setItem(message, "Hello!ü§£");
                localStorage.setItem(visited, today.toUTCString());

                // get data for display in page
                ele.textContent = `${message}   = ${localStorage.getItem(message)}\n${previous}  = ${previousVisit}\n${visited} = ${localStorage.getItem(visited)}`
            }



            async function showCookies() {
                const elefb = document.querySelector('.elefb');
                elefb.innerHTML = `_fbp = ${getCookie("_fbp")}`

                const elega = document.querySelector('.elega');
                elega.innerHTML = `_ga = ${getCookie("_ga")}`
            }

            await showCookies();
            await showData();
            await showLink();
            await showEntities();
            await showCookie();
            await showStorage();

        })();





    </script>

</body>
</html>