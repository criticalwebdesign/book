<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Tracking the Trackers</title>

    <!-- 
    Title: Tracking the Trackers
    Author: Owen Mundy
    Date: 2024
    License: MIT
    -->

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">

    <style>
        .example {
            border: 1px solid #ccc;
            padding: 12px;
            background-color: #eee;
            border-radius: 5px;
        }
    </style>
</head>
<body>







    <div class="container">

        <div class="row">
            <div class="col">
                <h2 class="mt-3">How Are You Identified?</h2>
                <p>Explore how others store and access your data to track and manipulate you across different websites, browsers, and devices.</p>

                <small class="d-block mt-2">⚠️ This page contains several web tracking methods and is for testing only. Opening it in an incognito window with ad and / or tracker blockers disabled will allow you to see most results.</small>
            </div>
        </div>





        <div class="row mt-5">
            <div class="col-12 col-md-2">
                <h4>Link Tracking</h4>
            </div>
            <div class="col-12 col-md-5">

                Link tracking is easy to spot and avoid. When you click an ad or attempt to share a link the extra URL parameters (see Module 5.3) added at the end of the address are attempting to transmit data about your web activity. Parameters like <b>utm_source</b> and <b>utm_campaign</b> are <a href="https://en.wikipedia.org/wiki/UTM_parameters">standard</a>, but there are many others that can be parsed by analytics and advertising tools. Find and click on an online ad to see one in action.

                <small class="d-block mt-2">⚠️ You can usually delete everything after the "?" whenever you use a <b>utm_*</b> link.</small>
                <small class="d-block mt-2">⚠️ Link tracking <a href="https://blog.hootsuite.com/how-to-use-utm-parameters/">does not require consent</a> under the GDPR like cookies and third party tracking pixels.</small>

            </div>
            <div class="col-12 col-md-5 example">

                <div>Example 1:</div>
                <code>
                    <a href="https://www.example.com/page?utm_content=buffercf3b2&utm_medium=social&utm_source=snapchat.com&utm_campaign=buffer">https://www.example.com/page?utm_content=buffercf3b2&utm_medium=social&utm_source=snapchat.com&utm_campaign=buffer</a>
                </code>

                <div class="mt-3">Example 2 (your data):</div>
                <code class="elelink">

                </code>
            </div>
        </div>





        <div class="row mt-5">
            <div class="col-12 col-md-2">
                <h4>Cookies</h4>
            </div>
            <div class="col-12 col-md-5">
                Any Javascript you embed on a page instantly has access to your
                <ol>
                    <li>Open DevTools > Applications</li>
                    <li>Expand Storage > Cookies</li>
                    <li>Select the cookie with the name _ga (Google Analytics)</li>
                </ol>
            </div>
            <div class="col-12 col-md-5 example">

            </div>
        </div>




        <div class="row mt-5">
            <div class="col-12 col-md-2">
                <h4>Embedded Media</h4>
            </div>
            <div class="col-12 col-md-5">
                YouTube and other embedded media can also access your data.
                <ol>
                    <li>Open DevTools > Applications</li>
                    <li>Expand Storage > Cookies</li>
                    <li>Select the cookie with the name _ga (Google Analytics)</li>
                </ol>
            </div>
            <div class="col-12 col-md-5 example">
                <div class="ratio ratio-4x3">
                    <iframe width="560" height="315" src="https://www.youtube.com/embed/dQw4w9WgXcQ?si=_U5wln0rCHoUl1Jh" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>
                </div>
            </div>
        </div>




        <div class="row mt-5">
            <div class="col-12 col-md-2">
                <h4>Meta Tracking Pixel</h4>
            </div>
            <div class="col-12 col-md-5" style="min-height: 200px;">
                You can't see it, because it's an invisible 1x1 pixel image, but the Meta Tracking Pixel is one of the sneakiest
            </div>
            <div class="col-12 col-md-5 example">


                <!-- Meta Pixel Code -->
                <script>
                    !function (f, b, e, v, n, t, s) {
                        if (f.fbq) return; n = f.fbq = function () {
                            n.callMethod ?
                                n.callMethod.apply(n, arguments) : n.queue.push(arguments)
                        };
                        if (!f._fbq) f._fbq = n; n.push = n; n.loaded = !0; n.version = '2.0';
                        n.queue = []; t = b.createElement(e); t.async = !0;
                        t.src = v; s = b.getElementsByTagName(e)[0];
                        s.parentNode.insertBefore(t, s)
                    }(window, document, 'script',
                        'https://connect.facebook.net/en_US/fbevents.js');
                    fbq('init', '893511094044886');
                    fbq('track', 'PageView');
                </script>
                <noscript><img height="1" width="1" style="display:none" src="https://www.facebook.com/tr?id=893511094044886&ev=PageView&noscript=1" /></noscript>
                <!-- End Meta Pixel Code -->
                <img src="https://www.facebook.com/tr?id=4309188662501524&ev=PageView&noscript=1" alt="">


            </div>
        </div>














    </div>


    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>

    <script src="../../assets/js/fs-environment.js"></script>
    <script>

        async function main() {

            try {
                const elelink = document.querySelector('.elelink');

                let url = "https://www.example.com/page?"
                let browser = await Environment.getBrowserName();
                if (browser) url += `browser=${browser}`
                let location = await Environment.getLocation();
                if (location.ip) url += `&ip=${location.ip}`
                if (location.city) url += `&ip=${location.city}`
                if (location.region) url += `&ip=${location.region}`
                if (location.country) url += `&ip=${location.country}`
                if (location.continent) url += `&ip=${location.continent}`
                if (location.lat) url += `&ip=${location.lat}`
                if (location.lng) url += `&ip=${location.lng}`
                if (location.timezone) url += `&ip=${location.timezone}`
                let language = await Environment.getBrowserLanguage();
                if (language) url += `&language=${language}`
                let platform = await Environment.getPlatform();
                if (platform) url += `&platform=${platform}`
                let { level, charging } = await Environment.getBattery();
                if (level) url += `&battery=${level}%`
                if (charging) url += `&charging=${charging}`

                console.log("url",url)

                elelink.innerHTML = `<a href="https://www.example.com/page?browser=${url}">${url}</a>`;
            } catch (err) {
                console.log("err",err)
            } 
        }
        main()

    </script>

</body>
</html>